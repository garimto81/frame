<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>포커스 이슈 탐지기 - 기술 원리</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans KR', sans-serif; background-color: #f8fafc; }
        .flow-card {
            background-color: white;
            border-radius: 1rem;
            padding: 2rem;
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.05), 0 4px 6px -4px rgb(0 0 0 / 0.05);
            border: 1px solid #e5e7eb;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        .flow-arrow {
            color: #d1d5db; /* gray-300 */
            margin: 1.5rem 0;
            text-align: center;
        }
    </style>
</head>
<body class="antialiased">

    <div class="container mx-auto max-w-4xl px-4 py-12 md:py-20">
        <header class="text-center mb-16">
            <h1 class="text-4xl md:text-5xl font-bold text-gray-900 tracking-tight">Focus Issue Detector: Technical Overview</h1>
            <p class="text-xl text-gray-600 mt-4 max-w-2xl mx-auto">자동화된 포커스 분석의 핵심 기술 원리를 순서도 형태로 설명합니다.</p>
        </header>

        <div class="flex flex-col items-center">
            
            <!-- Start Node -->
            <div class="bg-blue-600 text-white font-bold py-3 px-6 rounded-full shadow-lg">
                분석 시작 (영상 파일 입력)
            </div>

            <div class="flow-arrow">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 mx-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
                </svg>
            </div>

            <!-- Step 1: 얼굴 인식 -->
            <div class="flow-card w-full">
                <div class="flex items-start gap-4">
                    <div class="bg-blue-100 text-blue-700 font-bold text-lg rounded-full w-12 h-12 flex-shrink-0 flex items-center justify-center">1</div>
                    <div>
                        <h3 class="text-2xl font-bold">얼굴 인식 (Face Detection)</h3>
                        <p class="text-md text-gray-500">가장 중요한 분석 대상 선정</p>
                    </div>
                </div>
                <div class="pl-16">
                    <p class="text-lg text-gray-700">
                        <code class="text-sm bg-gray-100 p-1 rounded">face-api.js</code> 라이브러리의 <strong class="font-semibold text-gray-800">TinyFaceDetector</strong> 모델을 사용하여 프레임 내 얼굴의 경계 상자(Bounding Box)를 예측합니다. 이 모델은 웹 브라우저 환경에 최적화된 SSD(Single Shot Detector) 기반의 경량화된 AI 모델입니다.
                    </p>
                    <div class="mt-4 bg-gray-50 p-4 rounded-md">
                        <p class="font-semibold text-gray-800">처리 순서:</p>
                        <ul class="list-decimal list-inside mt-2 text-gray-600">
                            <li>영상 프레임에서 모든 얼굴의 위치를 찾습니다.</li>
                            <li>여러 얼굴이 감지될 경우, 프레임의 기하학적 중심점에 가장 가까운 얼굴 하나를 최종 분석 대상으로 선택합니다.</li>
                        </ul>
                         <img src="https://raw.githubusercontent.com/garimto81/frame/refs/heads/main/2506271214.png" alt="얼굴 주변에 경계 상자가 그려진 예시" class="mt-4 rounded-lg shadow-sm border">
                    </div>
                </div>
            </div>

            <div class="flow-arrow">
                 <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 mx-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
                </svg>
            </div>

            <!-- Step 2: 선명도 정량화 -->
            <div class="flow-card w-full">
                <div class="flex items-start gap-4">
                    <div class="bg-blue-100 text-blue-700 font-bold text-lg rounded-full w-12 h-12 flex-shrink-0 flex items-center justify-center">2</div>
                    <div>
                        <h3 class="text-2xl font-bold">선명도 정량화 (Scoring)</h3>
                        <p class="text-md text-gray-500">이미지의 선명도를 객관적인 점수로 변환</p>
                    </div>
                </div>
                <div class="pl-16">
                    <p class="text-lg text-gray-700">
                        선택된 얼굴 영역(ROI)에 <strong class="font-semibold text-gray-800">라플라시안 분산 (Variance of Laplacian)</strong> 알고리즘을 적용합니다. 이는 2차 편미분 필터를 통해 이미지의 고주파 성분, 즉 엣지(Edge)의 강도를 측정하는 고전적인 컴퓨터 비전 기법입니다.
                    </p>
                    <div class="mt-4 bg-gray-50 p-4 rounded-md">
                         <p class="font-semibold text-gray-800">점수 계산 원리:</p>
                        <ul class="list-decimal list-inside mt-2 text-gray-600">
                            <li><strong class="text-green-600">선명한 이미지:</strong> 엣지가 뚜렷하여 픽셀 값의 변화율이 크므로, 라플라시안 연산 결과의 분산 값이 <strong class="font-bold">높게</strong> 나타납니다.</li>
                            <li><strong class="text-red-600">흐릿한 이미지:</strong> 엣지가 뭉개져 픽셀 값의 변화가 완만하므로, 분산 값이 <strong class="font-bold">낮게</strong> 나타납니다.</li>
                        </ul>
                        <img src="https://raw.githubusercontent.com/garimto81/frame/refs/heads/main/2506271219.jpg" alt="라플라시안 분산을 통한 선명도 비교 다이어그램" class="mt-4 rounded-lg shadow-sm border">
                    </div>
                </div>
            </div>

             <div class="flow-arrow">
                 <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 mx-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
                </svg>
            </div>

            <!-- Step 3: 문제 순간 포착 -->
            <div class="flow-card w-full">
                <div class="flex items-start gap-4">
                    <div class="bg-blue-100 text-blue-700 font-bold text-lg rounded-full w-12 h-12 flex-shrink-0 flex items-center justify-center">3</div>
                    <div>
                        <h3 class="text-2xl font-bold">상태 전이 감지 (Detection)</h3>
                        <p class="text-md text-gray-500">품질이 저하되는 결정적인 순간 포착</p>
                    </div>
                </div>
                <div class="pl-16">
                     <p class="text-lg text-gray-700">
                        단순히 점수가 낮은 프레임을 찾는 것을 넘어, 프레임 간의 <strong class="font-semibold text-gray-800">상태 전이(State Transition)</strong>를 추적하여 문제의 발생 시점을 정확히 특정합니다.
                    </p>
                    <div class="mt-4 bg-gray-50 p-4 rounded-md">
                        <p class="font-semibold text-gray-800">포착 조건:</p>
                        <ul class="list-decimal list-inside mt-2 text-gray-600">
                            <li><code class="text-sm bg-gray-200 p-1 rounded">t-1</code> 시점 프레임의 상태가 '선명(Sharp)' 입니다.</li>
                            <li><code class="text-sm bg-gray-200 p-1 rounded">t</code> 시점 프레임의 상태가 '흐림(Blurry)' 입니다.</li>
                            <li>위 두 조건이 모두 충족될 때, 해당 <code class="text-sm bg-gray-200 p-1 rounded">t-1</code>과 <code class="text-sm bg-gray-200 p-1 rounded">t</code> 프레임 이미지를 '주요 프레임'으로 저장합니다.</li>
                        </ul>
                         <img src="https://raw.githubusercontent.com/garimto81/frame/refs/heads/main/%EC%8A%A4%ED%81%AC%EB%A6%B0%EC%83%B7%202025-06-27%20121633.png" alt="임계값을 기준으로 상태가 변하는 그래프 예시" class="mt-4 rounded-lg shadow-sm border">
                    </div>
                </div>
            </div>

            <div class="flow-arrow">
                 <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 mx-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
                </svg>
            </div>

             <!-- End Node -->
            <div class="bg-green-600 text-white font-bold py-3 px-6 rounded-full shadow-lg">
                결과 저장 및 시각화
            </div>
        </div>

        <footer class="text-center mt-16 md:mt-24">
            <a href="index.html" class="bg-blue-600 text-white font-bold py-3 px-8 rounded-full hover:bg-blue-700 transition duration-300 text-lg">앱으로 돌아가기</a>
        </footer>
    </div>
</body>
</html>
